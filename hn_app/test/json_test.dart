import 'package:flutter_test/flutter_test.dart';
import 'package:hn_app/json_parsing.dart';

void main() {
  test("parses topstories", (){
    const jsonString = "[19228744,19229231,19227070,19228452,19225268,19229502,19227441,19222748,19224579,19223694,19224657,19229433,19222274,19226861,19226666,19228940,19225895,19228607,19225962,19224566,19226071,19224567,19226719,19225850,19228577,19226472,19225857,19224542,19228508,19224141,19226480,19212771,19223730,19222180,19225494,19225873,19226761,19220889,19226262,19228399,19222191,19229584,19226355,19229432,19225964,19226499,19224887,19223853,19227846,19229326,19224672,19216527,19221181,19214821,19228851,19218097,19228947,19224866,19209957,19227309,19225424,19227294,19229230,19216077,19216477,19227131,19226445,19222542,19226682,19217575,19224939,19220892,19224880,19227434,19220518,19222215,19225577,19216523,19214387,19215934,19226747,19228746,19221520,19208700,19224884,19225766,19216315,19216589,19210932,19228601,19219212,19214035,19216371,19221754,19219273,19216101,19215026,19226140,19224995,19222921,19211361,19216019,19226334,19214512,19219680,19216428,19216649,19221443,19216568,19225688,19215199,19227962,19216195,19226208,19219722,19218053,19214357,19210727,19212127,19226474,19226002,19216356,19213217,19211497,19226406,19224383,19214141,19227602,19219478,19215276,19220658,19218178,19224512,19207344,19220988,19222467,19213285,19222759,19215724,19212123,19227121,19210697,19224005,19212987,19220332,19223408,19223500,19216925,19220831,19210941,19223845,19208508,19216303,19228610,19213938,19216243,19215447,19220210,19216373,19215238,19210822,19220355,19226692,19219457,19218540,19214952,19210882,19213950,19218339,19216681,19223585,19222456,19218036,19225664,19215045,19220094,19222705,19212859,19214781,19209527,19220626,19211538,19222939,19225009,19213605,19213508,19220543,19212929,19212822,19223301,19210043,19216349,19215988,19226040,19223377,19212296,19211996,19210351,19208293,19215727,19211428,19209909,19218408,19220128,19211189,19213511,19209785,19209262,19216827,19225498,19211244,19216277,19207424,19216148,19208859,19207624,19211011,19215919,19216692,19210584,19213411,19207518,19209213,19225793,19217926,19212086,19217557,19224241,19207396,19210923,19216236,19207186,19221845,19217479,19223566,19207523,19215689,19222547,19218163,19224699,19222070,19210331,19218068,19215299,19224625,19212375,19222457,19215265,19223264,19214887,19221056,19207657,19208484,19216066,19223840,19214348,19211129,19208181,19211154,19208004,19220384,19219710,19214955,19223429,19214359,19211970,19207834,19213100,19224073,19207956,19220029,19226400,19217409,19214076,19217499,19215312,19220608,19215927,19219089,19212068,19222716,19207187,19214938,19214861,19213297,19221325,19210512,19213160,19216853,19215763,19211709,19209210,19213387,19207226,19214339,19222835,19215809,19222773,19225721,19221843,19217856,19219382,19213833,19220434,19213458,19223458,19221353,19213893,19207416,19216333,19213942,19217048,19212238,19221146,19214333,19213105,19213216,19221836,19209964,19220223,19222859,19214589,19213587,19221253,19213857,19212502,19221039,19219233,19214499,19212700,19222296,19218076,19215720,19213379,19221898,19210953,19214510,19210717,19221430,19214194,19214270,19224830,19208774,19208486,19216212,19217765,19211168,19214353,19214966,19213124,19211415,19212393,19214595,19219735,19207927,19211532,19216308,19216177,19222305,19207199,19217899,19211366,19215544,19214229,19217240,19216912,19213501,19214946,19213372,19214865,19214811,19220218,19207494,19212648,19211810,19215869,19207850,19213731,19213612,19215251,19209345,19209305,19212995,19215065,19209646,19209291,19214700,19211376,19214447,19213815,19213510,19207764,19213058,19212747,19212493,19212397,19211207,19208409,19209314,19208799,19213180,19208791,19211027,19212358,19209206,19209052,19207533,19224257]";

    expect(parseTopStories(jsonString).first, 19228744 );

  });

  test("parses item", (){
    const jsonString = """ 
    {
      "by" : "dhouston",
      "descendants" : 71,
      "id" : 8863,
      "kids" : [ 9224, 8952, 8917, 8884, 8887, 8869, 8940, 8908, 8958, 9005, 8873, 9671, 9067, 9055, 8865, 8881, 8872, 8955, 10403, 8903, 8928, 9125, 8998, 8901, 8902, 8907, 8894, 8870, 8878, 8980, 8934, 8943, 8876 ],
      "score" : 104,
      "time" : 1175714200,
      "title" : "My YC app: Dropbox - Throw away your USB drive",
      "type" : "story",
      "url" : "http://www.getdropbox.com/u/2/screencast.html"
    }
    """;

    expect(parseItem(jsonString).by, "dhouston" );

  });

}